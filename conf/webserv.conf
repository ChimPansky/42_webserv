
use select;

error_log   /log/error_log info;

http {

    client_max_body_size 1M;
    
    error_page 401 /401.html;
    error_page 403 /403.html;
    error_page 404 /404.html;
    error_page 500 /500.html;
    error_page 502 /502.html;
    error_page 503 /503.html;
    error_page 504 /504.html;

    autoindex off;

    keepalive_timeout 65;

    server {

        listen  8090;
        server_name localhost;
        index     index.html;

        access_log /log/server1.access_log info;

        location = /priority0.html {
            root  /files;
            allow_methods GET POST;
        }

        location /priority2 {
            root  /files;
            allow_methods GET POST HEAD;
            autoindex on;
        }

        location ^~ /priority1 {
            root  /files;
            allow_methods GET POST;
        }
    }

    server {

        listen  8090 default_server;
        server_name example.com www.example.com;

        access_log /log/server2.access_log info;

        location /old-page {
            return 301 /newpage.html;
        }

        location /cgi-bin {

            root /usr/cgi-bin;
            cgi_path /cgi-bin;
            cgi_extension .php;
        }
    }
}
